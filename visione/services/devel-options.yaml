services:
  scene-detection:
    volumes: ["./analysis/scene-detection:/usr/src/app"]

  objects-colors:
    volumes: ["./analysis/objects-colors:/usr/src/app"]

  objects-mrcnn-lvis: &mmdet
    volumes: ["./analysis/objects-mmdet:/usr/src/app"]

  objects-vfnet64-coco:
    <<: *mmdet

  objects-frcnn-oiv4:
    volumes: ["./analysis/objects-openimagesv4:/usr/src/app"]

  features-clip-openai: &clip
    volumes: ["./analysis/features-clip:/usr/src/app"]

  features-clip-laion:
    <<: *clip
  
  features-clip-datacomp:
    <<: *clip

  features-clip2video:
    volumes:
      - ./analysis/features-clip2video/preprocessing.py:/usr/src/app/preprocessing.py
      - ./analysis/features-clip2video/extract.py:/usr/src/app/extract.py
      - ./analysis/features-clip2video/service.py:/usr/src/app/service.py

  features-gem:
    volumes:
      - ./analysis/features-gem/extract.py:/usr/src/app/extract.py
      - ./analysis/features-gem/service.py:/usr/src/app/service.py

  frame-cluster:
    volumes: ["./analysis/frame-cluster:/usr/src/app"]

  str-object-encoder:
    volumes: ["./index/str-object-encoder:/usr/src/app"]

  str-feature-encoder:
    volumes: ["./index/str-feature-encoder:/usr/src/app"]

  lucene-index-manager: {}
    # volumes: ["./index/lucene-index-manager:/usr/src/app"]

  faiss-index-manager:
    volumes: ["./index/faiss-index-manager:/usr/src/app"]
