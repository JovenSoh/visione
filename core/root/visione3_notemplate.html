<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Episode III-Revenge of VISIONE</title>
<link rel="stylesheet" href="css/jquery-ui.min.css">
<link rel="stylesheet"
	href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
<link rel="stylesheet" href="css/bootstrap.css">
<link rel="stylesheet" href="css/vbs_visione3.css">
<link rel="stylesheet" href="css/videopopup.css">
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/fabric.js"></script>
<script src="js/vbs_visione3.js"></script>
<script src="js/vbs_visione3.js"></script>
<script src="js/visione_template.js"></script>
<script src="js/videopopup.js"></script>
</head>
<body oncontextmenu="return false;">
	<div align="left" style="padding-top: 8px; padding-bottom: 5px;">
		<span style="float: left; padding-left: 30px; padding-right: 30px;"><button
				id="newsession" class="btn btn-warning btn-sm"
				title="Start a new Session" onclick="startNewSession();">
				<i class="fa fa-play"> New Session</i>
			</button></span> <img src="img/logoVISIONE.png" height="28px"
			style="border-radius: 20px 20px 20px 20px;" alt=""> <img
			src="img/cropped-aimh_logo5-1024x372.png" height="28px"
			style="border-radius: 20px 20px 20px 20px;" alt="">
	</div>
	<div id="dialog" title="Tag Name">
		<label>tag</label> <input id="tag" name="tag" type="text">
	</div>
	<div id="content" class="container-fluid" style="padding-top: 10px;">
		<div w3-include-html="palette2.html"></div>
		
		<table>
			<tr valign="top">
				<td><input id='group' type="checkbox" checked
					style="visibility: hidden;">
					<table align="left">

						<tr valign="top">
							<td><span style="vertical-align: bottom;"> <img
									src="Actions-dialog-close-icon.png" class="deleteBtn"
									style="width: 16px; height: 16px;" /></span></td>
							<td id='canvasTab'
								style="border: 3px solid #dee2e6; border-radius: 20px;">

								<div style="position: relative;">
									<div id="overlay0">
										<div align="center" id="text0" style="color: gray;">Disabled</div>
									</div>
									<div id="canvasdiv1">
										<canvas id='canvas0' width=250 height=140
											style="border: 1px solid #000000;"></canvas>
									</div>
									<table>

										<tr>
											<td colspan="13" title="Scene Description"><input
												id='annotations0' type="text" size="0"
												style="display: none;"></td>
										</tr>
										<tr valign="top">
											<td colspan="13" title="Max Objects Number"><input
												id='not0' type="text" size="55"
												placeholder="Max Obj: e.g.: 2 person 3 car 0 dog, means at most 2 persons, 3 cars, no dogs"></td>
										</tr>
										<tr valign="top">
											<td colspan="13" title="Scene Description"><textarea
													id='tern0' cols="57" rows="2"
													placeholder="Desc: e.g.: A tennis player serving a ball on the court"></textarea></td>
										</tr>
									</table>

									<table style="width: 95%;">
										<tr>	
											<td align="left">
								<span style="vertical-align: top;" title="Black & White Keyframe"><input
							id='isGray0' type="checkbox" onchange="setGray(0)"> B/W
							&nbsp; <input id='isColor0' type="checkbox" onchange="setColor(0)"></span>
							<span title="Color Keyframe" style="background: linear-gradient(to right, #FF0000 0%, #00FF00 100%);-webkit-background-clip: text;-webkit-text-fill-color: transparent;">Color&nbsp;</span>
							</td>
										</tr>
									</table>


									<div class="row">
										<div class="col-7 top5">
											<div>
												<button id="clean0" class="btn btn-outline-danger btn-sm"
													title="clean canvas 1">
													<i class="fa fa-trash"></i>
												</button>
												<button id="undo0" class="btn btn-outline-success btn-sm"
													title="undo clean canvas 1">
													<i class="fa fa-undo"></i>
												</button>
											</div>
										</div>
									</div>
								</div>
							</td>

						</tr>

						<tr valign="top">
							<td style="display: none;"><span
								style="vertical-align: bottom;"> <img
									src="Actions-dialog-close-icon.png" class="deleteBtn"
									style="width: 16px; height: 16px;" /></span></td>
							<td id='canvasTab'
								style="display: none; border: 3px solid #dee2e6; border-radius: 20px;">
								<table style="width: 95%;">
									<tr>

										<td align="right"><span style="vertical-align: top;"
											title="Black & White Keyframe"><input id='isGray0'
												type="checkbox" onchange="setGray(1)"> 4:3</span></td>
										<td align="right"><span style="vertical-align: top;"
											title="Black & White Keyframe"><input id='isGray0'
												type="checkbox" onchange="setGray(1)"> B/W</span></td>
										<td align="right"><span style="vertical-align: top;"
											title="Black & White Keyframe"><input id='isGray0'
												checked type="checkbox" onchange="setGray(1)"> MUST</span>
										</td>
									</tr>
								</table>
								<div style="position: relative;">
									<div id="overlay1">
										<div align="center" id="text0" style="color: gray;">Disabled</div>
									</div>
									<div id="canvasdiv2">
										<canvas id='canvas1' width=190 height=107
											style="border: 1px solid #000000;"></canvas>
									</div>
									<table>
										<tr valign="top">
											<td colspan="13" title="Scene Description"><input
												id='tern1' type="text" size="39"
												placeholder="Desc: e.g.: A tennis player serving a ball on the court"></td>
										</tr>
										<tr>
											<td colspan="13" title="Scene Description"><input
												id='annotations1' type="text" size="0"
												style="display: none;"></td>
										</tr>
										<tr valign="top">
											<td colspan="13" title="Max Objects Number"><input
												id='not1' type="text" size="39"
												placeholder="Max Obj: e.g.: 2 person 3 car 0 dog, means at most 2 persons, 3 cars, no dogs"></td>
										</tr>
									</table>


									<div class="row">
										<div class="col-7 top5">
											<div>
												<button id="clean1" class="btn btn-outline-danger btn-sm"
													title="clean canvas 1">
													<i class="fa fa-trash"></i>
												</button>
												<button id="undo1" class="btn btn-outline-success btn-sm"
													title="undo clean canvas 1">
													<i class="fa fa-undo"></i>
												</button>
											</div>
										</div>
									</div>
								</div>
							</td>

						</tr>
						<tr align="center">
							<td colspan="2" align="center">
								<button id="clean0" class="btn btn-outline-info btn-lg"
									title="add a new canvas">
									<i class="fa fa-plus-circle"></i>
								</button>
							</td>
						</tr>
					</table></td>
				<td>
					<table>
						<tr>
							<td width="85%">
								<div class="row">
									<div id='results' class="col" align="center"></div>
								</div>

							</td>
							<td width="15%" valign="top">

								<div id="avsTab"
									style="height: 70%; width: 100%; overflow-y: scroll;"></div>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	</div>
	<script>
		$(document)
				.ready(
						function() {

							$(function() {
								$("#dialog").dialog({
									autoOpen : false
								});
							});
							includeHTML();
							canvas0 = get_canvas('canvas0', 'annotations0',
									'not0');
							canvas1 = get_canvas('canvas1', 'annotations1',
									'not1');
							canvases = [ canvas0, canvas1 ];

							$('#content').on('drop', dropImage);

							$("#clean0").on('click', function(e) {
								if (!isCanvasClean[0]) {
									isCanvasClean[0] = true;
									canvasClean(0);
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							$("#clean1").on('click', function(e) {
								if (!isCanvasClean[1]) {
									isCanvasClean[1] = true;
									canvasClean(1);
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							$("#reset").on('click', function(e) {
								if (!isReset) {
									isReset = true;
									reset();
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							$("#tern0")
									.keyup(
											function(event) {
												if (event.keyCode === 13) {
													queryByTERN(
															document
																	.getElementById('tern0').value,
															document
																	.getElementById('tern1').value);
												}
											});
							$("#tern1")
									.keyup(
											function(event) {
												if (event.keyCode === 13) {
													queryByTERN(
															document
																	.getElementById('tern0').value,
															document
																	.getElementById('tern1').value);
												}
											});

							$("#undo0").on('click', function(e) {
								if (isCanvasClean[0]) {
									isCanvasClean[0] = false;
									canvasCleanUndo(0);
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							$("#undo1").on('click', function(e) {
								if (isCanvasClean[1]) {
									isCanvasClean[1] = false;
									canvasCleanUndo(1);
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							$("#undoReset").on('click', function(e) {
								if (isReset) {
									isReset = false;
									undoReset();
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							canvas0.renderAll();
						});
	</script>

</body>
</html>