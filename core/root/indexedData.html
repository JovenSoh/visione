<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>VBS Indexed Data</title>
<link href="css/vbs.css" rel="stylesheet">
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/vbs_visione3.js"></script>
</head>
<body>
	<div class="container" style="visibility: hidden;">
	<div style="padding-left: 20px;">
		<h3 id='imgID' align="center" style="color: navy;"></h3>
		
		<div >
			<span id='img'></span>			
		</div>
	</div>

		
		<div style="padding-top: 10px;" id='txt'></div>

		<h2 style="color: navy;">Objects</h2>
		<div id='objects'></div>

		<h2 style="color: navy;">Objects Info</h2>
		<div id='objectsInfo'></div>
	
		<!-- <h2 style="color: navy;">Grayscale: <span style="color: red;" id='isgray'></span></h2> -->
	</div>

	<script>
	
	var client  = new XMLHttpRequest();
	client.onload = handler;
	client.open("GET", "js/conf.json", false);
	client.send(); 
	$.urlParam = function(name) {
		var results = new RegExp('[\?&]' + name + '=([^&#]*)')
				.exec(window.location.href);
		return results[1] || 0;
	}


	id = $.urlParam('id');
	collection = $.urlParam('collection');
	img = '<img width=1024 src="'+keyFramesUrl+ collection + "/" + id + '">'
	console.log('====ID' + id);
	text = getText(id, 'txt');
	console.log('====TEXT' + text);

	objects = getText(id, 'objects');
	objectsInfo = getText(id, 'objectsinfo');
	console.log('====objectsInfo' + objectsInfo);

	//annotations = getText(id, 'mifile');
	//console.log('====annotations' + annotations);
	
	//isgray = getText(id, 'isgray');
	//console.log('====isgray ' + isgray);
	$('.container').css('visibility', 'visible');
	video = id.split("/")[0];
		$('#imgID').append('<a title="Show All Video Keyframes"  href="showVideoKeyframes.jsp?collection=' + collection + '&id=' + id + '#' + id.split("/")[1].split("\.")[0] + '"> Keyframes of ' + video + '</a>');
		$('#img').append(img);
		//$('#txt').append(text);
		indexedCells(text);
		$('#objects').append(objects);
		$('#objectsInfo').append(objectsInfo);

		//$('#annotations').append(annotations);
		//$('#isgray').append(isgray);
	</script>

</body>
</html>