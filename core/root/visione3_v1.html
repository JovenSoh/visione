<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Episode III-Revenge of VISIONE</title>
<link rel="stylesheet" href="css/jquery-ui.min.css">
<link rel="stylesheet"
	href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
<link rel="stylesheet" href="css/bootstrap.css">
<link rel="stylesheet" href="css/vbs_visione3.css">
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/fabric.js"></script>
<script src="js/vbs_visione3.js"></script>
<script src="js/canvas_visione3.js"></script>
<script src="js/visione_templates.js"></script>
</head>
<body oncontextmenu="return false;">
		<div id="content" class="container-fluid" style="padding-top: 10px;">
		
	<table class="tableScrollable">
  	<tr>
  	<td class="tdScrollable" colspan=1 valign="top">
  		  		<div align="left" style="padding-top: 8px; padding-bottom: 5px;">
			<span style="float: left; padding-left: 30px; padding-right: 30px;"><button
					id="newsession" class="btn btn-warning btn-sm"
					title="Start a new Session" onclick="startNewSession();">
					<i class="fa fa-play"> New Session</i>
				</button></span> <img src="img/logoVISIONE.png" height="28px"
				style="border-radius: 20px 20px 20px 20px;" alt=""> <img
				src="img/cropped-aimh_logo5-1024x372.png" height="28px"
				style="border-radius: 20px 20px 20px 20px;" alt="">
		</div>
		<div id="dialog" title="Tag Name">
			<label>tag</label> <input id="tag" name="tag" type="text">
		</div>
			<div w3-include-html="palette2.html"></div>
  	
  	</td>
  	<td>
  		<div id="avsTab" style="height: 70%; width: 100vh; overflow-x: auto;"></div>
  	</td>
  	</tr>
  	<tr>
  	<td valign="top" class="tdScrollable" id='searchTab'></td>
  	<td>
  	<div class="tableFixHead">
      <table class="tableScrollable">
          <tr valign="top">
            <td valign="top" class="tdScrollable">
				<div id='results'></div>
            </td>
          </tr>
          
      </table>
    </div>
    </td>
  	</table>
		
		
		
		
		
		
		
		

  			</div>
  	

	<script>
		$(document)
				.ready(
						function() {

							$(function() {
								$("#dialog").dialog({
									autoOpen : false
								});
							});
							includeHTML();
							$("#searchTab").append(searchForm(0));
							//$("#searchTab").append(addButton);
							$("#searchTab").append(searchForm(1));
							//$("#searchTab").append(addButton);

							
							canvas0 = get_canvas('canvas0', 'annotations0',
									'not0');
							canvas1 = get_canvas('canvas1', 'annotations1',
									'not1');
							canvases = [ canvas0, canvas1 ];

							$('#content').on('drop', dropImage);

							$("#clean0").on('click', function(e) {
								if (!isCanvasClean[0]) {
									isCanvasClean[0] = true;
									canvasClean(0);
									searchByForm();
									//performSearch(cell2Text(0), cell2Text(1));
								}
							});
							

							$("#clean1").on('click', function(e) {
								if (!isCanvasClean[1]) {
									isCanvasClean[1] = true;
									canvasClean(1);
									//performSearch(cell2Text(0), cell2Text(1));
									searchByForm();
								}
							});

							$("#reset").on('click', function(e) {
								if (!isReset) {
									isReset = true;
									reset();
									//performSearch(cell2Text(0), cell2Text(1));
									searchByForm();
								}
							});

							$("#tern0")
									.keyup(
											function(event) {
												if (event.keyCode === 13) {
													queryByTERN(
															document
																	.getElementById('tern0').value,
															'');
												}
											});
							$("#tern1")
									.keyup(
											function(event) {
												if (event.keyCode === 13) {
													queryByTERN(
															document
																	.getElementById('tern0').value,
															document
																	.getElementById('tern1').value);
												}
											});

							$("#undo0").on('click', function(e) {
								if (isCanvasClean[0]) {
									isCanvasClean[0] = false;
									canvasCleanUndo(0);
									//performSearch(cell2Text(0), cell2Text(1));
									searchByForm();
								}
							});

							$("#undo1").on('click', function(e) {
								if (isCanvasClean[1]) {
									isCanvasClean[1] = false;
									canvasCleanUndo(1);
									//performSearch(cell2Text(0), cell2Text(1));
									searchByForm();
								}
							});

							$("#undoReset").on('click', function(e) {
								if (isReset) {
									isReset = false;
									undoReset();
									//performSearch(cell2Text(0), cell2Text(1));
									searchByForm();
								}
							});

							canvas0.renderAll();
						});
	</script>

</body>
</html>