<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Episode III-Revenge of VISIONE</title>
<link rel="stylesheet" href="css/jquery-ui.min.css">
<link rel="stylesheet"
	href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
<link rel="stylesheet" href="css/bootstrap.css">
<link rel="stylesheet" href="css/vbs_visione3.css">
<link rel="stylesheet" href="css/videopopup.css">
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/fabric.js"></script>
<script src="js/vbs_visione3.js"></script>
<script src="js/canvas_visione3.js"></script>
<script src="js/videopopup.js"></script>
</head>
<body oncontextmenu="return false;">
	<div align="left" style="padding-top: 8px; padding-bottom: 5px;">
		<span style="float: left; padding-left: 30px; padding-right: 30px;"><button
				id="newsession" class="btn btn-warning btn-sm"
				title="Start a new Session" onclick="startNewSession();">
				<i class="fa fa-play"> New Session</i>
			</button></span> <img src="img/logoVISIONE.png" height="28px"
			style="border-radius: 20px 20px 20px 20px;" alt=""> <img
			src="img/cropped-aimh_logo5-1024x372.png" height="28px"
			style="border-radius: 20px 20px 20px 20px;" alt="">
	</div>
	<div id="dialog" title="Tag Name">
		<label>tag</label> <input id="tag" name="tag" type="text">
	</div>
	<div id="content" class="container-fluid" style="padding-top: 10px;">
		<div class="container-sm-1" style="max-width: 300px;">
			<div class="row">
				<div class="col-sm-1">
					<img width="24" draggable="true" ondragstart="drag(event)"
						id="person" title="person" src="img/icons/person.png" />
				</div>
				<div class="col-sm-1">
					<img width="24" draggable="true" ondragstart="drag(event)"
						id="humanface" title="humanface" src="img/icons/humanface.png" />
				</div>
				<div class="col-sm-1">
					<img width="24" draggable="true" ondragstart="drag(event)"
						id="musician" title="musician" src="img/icons/musician.png" />
				</div>
				<div class="col-sm-1">
					<img width="24" draggable="true" ondragstart="drag(event)"
						id="athlete" title="athlete" src="img/icons/athlete.png" />
				</div>
				<div class="col-sm-1">
					<img width="24" draggable="true" ondragstart="drag(event)"
						id="skateboard" title="skateboard" src="img/icons/skateboard.png" />
				</div>
				<div class="col-sm-1">
					<img width="24" draggable="true" ondragstart="drag(event)"
						id="footwear" title="footwear" src="img/icons/footwear.png" />
				</div>
				<div class="col-sm-1">
					<img width="24" draggable="true" ondragstart="drag(event)"
						id="glasses" title="glasses" src="img/icons/glasses.png" />
				</div>
				<div class="col-sm-1">
					<img width="24" draggable="true" ondragstart="drag(event)"
						id="bicycle" title="bicycle" src="img/icons/bicycle.png" />
				</div>
				<div class="col-sm-1">
					<img width="24" draggable="true" ondragstart="drag(event)"
						id="vehicle" title="vehicle" src="img/icons/vehicle.png" />
				</div>
				<div class="col-sm-1">
					<img width="24" draggable="true" ondragstart="drag(event)"
						id="motorcycle" title="motorcycle" src="img/icons/motorcycle.png" />
				</div>
				<div class="col-sm-1">
					<img width="24" draggable="true" ondragstart="drag(event)" id="car"
						title="car" src="img/icons/car.png" />
				</div>

			</div>
		</div>

		<table>
			<tr valign="top">
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="person" title="person"
					src="img/icons/person.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="humanface" title="humanface"
					src="img/icons/humanface.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="musician" title="musician"
					src="img/icons/musician.png" /></td>


				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="athlete" title="athlete"
					src="img/icons/athlete.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="skateboard" title="skateboard"
					src="img/icons/skateboard.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="footwear" title="footwear"
					src="img/icons/footwear.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="glasses" title="glasses"
					src="img/icons/glasses.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="bicycle" title="bicycle"
					src="img/icons/bicycle.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="vehicle" title="vehicle"
					src="img/icons/vehicle.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="motorcycle" title="motorcycle"
					src="img/icons/motorcycle.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="car" title="car"
					src="img/icons/car.png" /></td>
			</tr>

			<tr valign="top">
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="truck" title="truck"
					src="img/icons/truck.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="boat" title="boat"
					src="img/icons/boat.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="parachute" title="parachute"
					src="img/icons/parachute.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="aeroplane" title="aeroplane"
					src="img/icons/aeroplane.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="bench" title="bench"
					src="img/icons/bench.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="chair" title="chair"
					src="img/icons/chair.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="couch" title="couch"
					src="img/icons/sofa.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="building" title="building"
					src="img/icons/building.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="bottle" title="bottle"
					src="img/icons/bottle.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="wineglass" title="wineglass"
					src="img/icons/wineglass.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="cup" title="cup"
					src="img/icons/cup.png" /></td>
			</tr>

			<tr valign="top">
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="dessert" title="dessert"
					src="img/icons/dessert.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="cellphone" title="cellphone"
					src="img/icons/cellphone.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="display" title="display"
					src="img/icons/display.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="laptop" title="laptop"
					src="img/icons/laptop.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="book" title="book"
					src="img/icons/book.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="cat" title="cat"
					src="img/icons/cat.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="dog" title="dog"
					src="img/icons/dog.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="horse" title="horse"
					src="img/icons/horse.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="teddy" title="teddy"
					src="img/icons/teddy.png" /></td>

				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="plant" title="plant"
					src="img/icons/plant.png" /></td>
				<td colspan="2" align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id="tree" title="tree"
					src="img/icons/tree.png" /></td>
			</tr>
		</table>
		<table>
			<tr valign="top">
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id='black' alt="color" title='black'
					alt="" src="img/palette11/black.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id='blue' alt="color" title='blue' alt=""
					src="img/palette11/blue.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id='brown' alt="color" title='brown'
					alt="" src="img/palette11/brown.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id='green' alt="color" title='green'
					alt="" src="img/palette11/green.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id='grey' alt="color" title='grey' alt=""
					src="img/palette11/grey.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id='orange' alt="color" title='orange'
					alt="" src="img/palette11/orange.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id='pink' alt="color" title='pink' alt=""
					src="img/palette11/pink.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id='purple' alt="color" title='purple'
					alt="" src="img/palette11/purple.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id='red' alt="color" title='red' alt=""
					src="img/palette11/red.png" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id='white' alt="color" title='white'
					alt="" src="img/palette11/white.png"
					style="border: 1px solid #000;" /></td>
				<td align="left"><img width="24" draggable="true"
					ondragstart="drag(event)" id='yellow' alt="color" title='yellow'
					alt="" src="img/palette11/yellow.png" /></td>
			</tr>
		</table>
		<table>
			<tr valign="top">
				<td><input id='group' type="checkbox" checked
					style="visibility: hidden;">
					<table align="left">

						<tr valign="top">
							<td><span style="vertical-align: bottom;"> <img
									src="Actions-dialog-close-icon.png" class="deleteBtn"
									style="width: 16px; height: 16px;" /></span></td>
							<td id='canvasTab'
								style="border: 3px solid #dee2e6; border-radius: 20px;">

								<div style="position: relative;">
									<div id="overlay0">
										<div align="center" id="text0" style="color: gray;">Disabled</div>
									</div>
									<div id="canvasdiv1">
										<canvas id='canvas0' width=250 height=140
											style="border: 1px solid #000000;"></canvas>
									</div>
									<table>

										<tr>
											<td colspan="13" title="Scene Description"><input
												id='annotations0' type="text" size="0"
												style="display: none;"></td>
										</tr>
										<tr valign="top">
											<td colspan="13" title="Max Objects Number"><input
												id='not0' type="text" size="55"
												placeholder="Max Obj: e.g.: 2 person 3 car 0 dog, means at most 2 persons, 3 cars, no dogs"></td>
										</tr>
										<tr valign="top">
											<td colspan="13" title="Scene Description"><textarea
													id='tern0' cols="57" rows="2"
													placeholder="Desc: e.g.: A tennis player serving a ball on the court"></textarea></td>
										</tr>
									</table>

									<table style="width: 95%;">
										<tr>

											<td align="right"><span style="vertical-align: top;"
												title="Black & White Keyframe"><input id='isGray0'
													type="checkbox" onchange="setGray(0)"> 4:3</span></td>
											<td align="right"><span style="vertical-align: top;"
												title="Black & White Keyframe"><input id='isGray0'
													type="checkbox" onchange="setGray(0)"> 16:9</span></td>
											<td align="right"><span style="vertical-align: top;"
												title="Black & White Keyframe"><input id='isGray0'
													type="checkbox" onchange="setGray(0)"> B/W</span></td>
											<td align="right"><span style="vertical-align: top;"
												title="Black & White Keyframe"> <input id='isColor0'
													type="checkbox" onchange="setColor(0)"></span> <span
												title="Color Keyframe"
												style="vertical-align: top; background: linear-gradient(to right, #FF0000 0%, #00FF00 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Color&nbsp;</span>

											</td>
											<td align="right"><span style="vertical-align: top;"
												title="Black & White Keyframe"><input id='isGray0'
													type="checkbox" onchange="setGray(0)"> Sim Reorder</span>
											</td>
										</tr>
									</table>


									<div class="row">
										<div class="col-7 top5">
											<div>
												<button id="clean0" class="btn btn-outline-danger btn-sm"
													title="clean canvas 1">
													<i class="fa fa-trash"></i>
												</button>
												<button id="undo0" class="btn btn-outline-success btn-sm"
													title="undo clean canvas 1">
													<i class="fa fa-undo"></i>
												</button>
											</div>
										</div>
									</div>
								</div>
							</td>

						</tr>

						<tr valign="top">
							<td style="display: none;"><span
								style="vertical-align: bottom;"> <img
									src="Actions-dialog-close-icon.png" class="deleteBtn"
									style="width: 16px; height: 16px;" /></span></td>
							<td id='canvasTab'
								style="display: none; border: 3px solid #dee2e6; border-radius: 20px;">
								<table style="width: 95%;">
									<tr>

										<td align="right"><span style="vertical-align: top;"
											title="Black & White Keyframe"><input id='isGray0'
												type="checkbox" onchange="setGray(1)"> 4:3</span></td>
										<td align="right"><span style="vertical-align: top;"
											title="Black & White Keyframe"><input id='isGray0'
												type="checkbox" onchange="setGray(1)"> B/W</span></td>
										<td align="right"><span style="vertical-align: top;"
											title="Black & White Keyframe"><input id='isGray0'
												checked type="checkbox" onchange="setGray(1)"> MUST</span>
										</td>
									</tr>
								</table>
								<div style="position: relative;">
									<div id="overlay1">
										<div align="center" id="text0" style="color: gray;">Disabled</div>
									</div>
									<div id="canvasdiv2">
										<canvas id='canvas1' width=190 height=107
											style="border: 1px solid #000000;"></canvas>
									</div>
									<table>
										<tr valign="top">
											<td colspan="13" title="Scene Description"><input
												id='tern1' type="text" size="39"
												placeholder="Desc: e.g.: A tennis player serving a ball on the court"></td>
										</tr>
										<tr>
											<td colspan="13" title="Scene Description"><input
												id='annotations1' type="text" size="0"
												style="display: none;"></td>
										</tr>
										<tr valign="top">
											<td colspan="13" title="Max Objects Number"><input
												id='not1' type="text" size="39"
												placeholder="Max Obj: e.g.: 2 person 3 car 0 dog, means at most 2 persons, 3 cars, no dogs"></td>
										</tr>
									</table>


									<div class="row">
										<div class="col-7 top5">
											<div>
												<button id="clean1" class="btn btn-outline-danger btn-sm"
													title="clean canvas 1">
													<i class="fa fa-trash"></i>
												</button>
												<button id="undo1" class="btn btn-outline-success btn-sm"
													title="undo clean canvas 1">
													<i class="fa fa-undo"></i>
												</button>
											</div>
										</div>
									</div>
								</div>
							</td>

						</tr>
						<tr align="center">
							<td colspan="2" align="center">
								<button id="clean0" class="btn btn-outline-info btn-lg"
									title="clean canvas 1">
									<i class="fa fa-plus-circle"></i>
								</button>
							</td>
						</tr>
					</table></td>
				<td>
					<table>
						<tr>
							<td width="85%">
								<div class="row">
									<div id='results' class="col" align="center"></div>
								</div>

							</td>
							<td width="15%" valign="top">

								<div id="avsTab"
									style="height: 70%; width: 100%; overflow-y: scroll;"></div>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	</div>
	<script>
		$(document)
				.ready(
						function() {

							$(function() {
								$("#dialog").dialog({
									autoOpen : false
								});
							});
							includeHTML();
							canvas0 = get_canvas('canvas0', 'annotations0',
									'not0');
							canvas1 = get_canvas('canvas1', 'annotations1',
									'not1');
							canvases = [ canvas0, canvas1 ];

							$('#content').on('drop', dropImage);

							$("#clean0").on('click', function(e) {
								if (!isCanvasClean[0]) {
									isCanvasClean[0] = true;
									canvasClean(0);
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							$("#clean1").on('click', function(e) {
								if (!isCanvasClean[1]) {
									isCanvasClean[1] = true;
									canvasClean(1);
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							$("#reset").on('click', function(e) {
								if (!isReset) {
									isReset = true;
									reset();
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							$("#tern0")
									.keyup(
											function(event) {
												if (event.keyCode === 13) {
													queryByTERN(
															document
																	.getElementById('tern0').value,
															document
																	.getElementById('tern1').value);
												}
											});
							$("#tern1")
									.keyup(
											function(event) {
												if (event.keyCode === 13) {
													queryByTERN(
															document
																	.getElementById('tern0').value,
															document
																	.getElementById('tern1').value);
												}
											});

							$("#undo0").on('click', function(e) {
								if (isCanvasClean[0]) {
									isCanvasClean[0] = false;
									canvasCleanUndo(0);
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							$("#undo1").on('click', function(e) {
								if (isCanvasClean[1]) {
									isCanvasClean[1] = false;
									canvasCleanUndo(1);
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							$("#undoReset").on('click', function(e) {
								if (isReset) {
									isReset = false;
									undoReset();
									performSearch2(cell2Text(0), cell2Text(1));
								}
							});

							canvas0.renderAll();
						});
	</script>

</body>
</html>